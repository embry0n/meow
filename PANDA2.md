## 1. Первичный анализ данных

### Метод `info()`

~~~python

print(df.info())
~~~
**Что делает:** Выводит информацию о структуре DataFrame - типы данных, количество non-null значений в каждом столбце, объем памяти.

**Зачем нужно:** Помогает быстро оценить качество данных и выявить столбцы с пропущенными значениями.


## 2. Работа с пропущенными значениями

### Обнаружение пропусков

~~~python

print(len(df[pd.isnull(df['Rating'])]))
~~~
**Что делает:** Считает количество пропущенных значений в столбце 'Rating'.

**`pd.isnull()`** - определяет, является ли значение NaN (пропущенным)

### Замена пропусков

~~~python

df['Rating'].fillna(-1, inplace=True)
~~~
**Что делает:** Заменяет все пропущенные значения в столбце 'Rating' на -1.

**`fillna()`** - заполняет пропущенные значения  
**`inplace=True`** - изменяет исходный DataFrame (без создания копии)



## 3. Преобразование типов данных

### Анализ уникальных значений

~~~python

print(df['Size'].value_counts())
~~~
**Что делает:** Показывает частоту каждого уникального значения в столбце.

### Создание пользовательских функций для преобразования

~~~python

def set_size(size):
    if size[-1] == 'M':
        return float(size[:-1])
    elif size[-1] == 'k':
        return float(size[:-1]) / 1024
    return -1

df['Size'] = df['Size'].apply(set_size)
~~~
**Как работает:**

- `size[-1]` - последний символ строки (M, k или другой)
    
- `size[:-1]` - все символы кроме последнего (числовая часть)
    
- `apply()` - применяет функцию к каждому элементу столбца
    

**Преобразование:**

- '15M' → 15.0 (мегабайты)
    
- '1024k' → 1.0 (килобайты в мегабайты)
    
- Другие значения → -1
    



## 4. Фильтрация и агрегация данных

### Фильтрация по условию

~~~python

df[df['Category'] == 'TOOLS']['Size'].max()
~~~
**Разберем по частям:**

- `df['Category'] == 'TOOLS'` - создает булев массив (True/False)
    
- `df[массив]` - фильтрует строки, где условие True
    
- `['Size']` - выбирает столбец Size
    
- `.max()` - находит максимальное значение
    



## 5. Обработка строковых данных

### Удаление символов и преобразование

~~~python

def set_installs(installs):
    if installs == '0':
        return 0
    return int(installs[:-1].replace(',', ''))
~~~
**Как работает:**

- `installs[:-1]` - удаляет последний символ '+'
    
- `.replace(',', '')` - удаляет запятые
    
- `int()` - преобразует в целое число
    

**Пример:** '1,000,000+' → 1000000

---

## 6. Группировка данных

### Сводные таблицы

~~~python

df.pivot_table(
    index='Content Rating', 
    columns='Type', 
    values='Installs', 
    aggfunc='mean'
)
~~~
**Параметры:**

- `index` - строки таблицы
    
- `columns` - столбцы таблицы
    
- `values` - значения для агрегации
    
- `aggfunc` - функция агрегации ('mean', 'sum', 'count' и др.)
    

---

## 7. Расширенные методы обработки

### Создание новых столбцов

~~~python

df['Profit'] = df['Installs'] * df['Price']
~~~
Создает новый столбец на основе существующих.

### Работа со списками в ячейках

~~~python

df['Genres'] = df['Genres'].apply(split_genres)
df['Number of genres'] = df['Genres'].apply(len)
~~~
**`split_genres`** разделяет строку на список жанров  
**`apply(len)`** считает количество элементов в списке

### Обработка дат и сезонов

~~~python

def set_season(date):
    month = date.split()[0]
    seasons = {
        'Зима': ['December', 'January', 'February'],
        'Весна': ['March', 'April', 'May'],
        'Лето': ['June', 'July', 'August'],
        'Осень': ['September', 'October', 'November']
    }
    for season in seasons:
        if month in seasons[season]:
            return season
    return 'Сезон не установлен'
~~~


## 8. Исправление ошибок в данных

### Поиск проблемных строк

~~~python

print(df.iloc[10472])
~~~
**`iloc[]`** - доступ к строке по индексу

### Ручное исправление смещенных данных

~~~python

for i in range(len(columns) -1, 1, -1):
    df[columns[i]][index] = df[columns[i - 1]][index]
~~~
**Как работает:** Сдвигает значения вправо, исправляя смещение столбцов.

---

## Практические советы

1. **Всегда смотрите на данные** перед обработкой
    
2. **Проверяйте результаты** каждого шага
    
3. **Создавайте функции** для сложных преобразований
    
4. **Документируйте** логику преобразований
    
5. **Сохраняйте промежуточные результаты**
    

## Ключевые методы pandas для запоминания

- `info()` - информация о DataFrame
    
- `fillna()` - заполнение пропусков
    
- `apply()` - применение функций
    
- `value_counts()` - частоты значений
    
- `pivot_table()` - сводные таблицы
    
- `isnull()` - обнаружение пропусков
    
- `iloc[]` - доступ по индексу
